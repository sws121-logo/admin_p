<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Infinity - Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #0f4c75;
            --secondary: #3282b8;
            --accent: #bbe1fa;
            --dark: #1b262c;
            --light: #f8f9fa;
        }

        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
        }

        .admin-panel {
            background: #f5f7f9;
            min-height: 100vh;
        }

        .sidebar {
            background: var(--dark);
            color: white;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .sidebar a {
            color: rgba(255, 255, 255, 0.8);
            padding: 15px 20px;
            display: block;
            transition: all 0.3s ease;
        }

        .sidebar a:hover,
        .sidebar a.active {
            background: var(--primary);
            color: white;
            text-decoration: none;
        }

        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .login-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: var(--primary);
            border: none;
        }

        .btn-primary:hover {
            background: var(--secondary);
        }

        .image-preview {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .current-image-container {
            position: relative;
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .current-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
        }

        .delete-image-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #dc3545;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
        }

        .amenity-tag {
            display: inline-block;
            background: var(--accent);
            padding: 5px 10px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.8rem;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .selected-amenities {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .amenity-badge {
            display: inline-flex;
            align-items: center;
            background-color: #e2e8f0;
            padding: 4px 8px;
            border-radius: 16px;
            font-size: 14px;
        }

        .amenity-badge .remove {
            margin-left: 6px;
            cursor: pointer;
            color: #718096;
        }

        .amenity-badge .remove:hover {
            color: #e53e3e;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .password-toggle {
            cursor: pointer;
            background: white;
            border: 2px solid #e2e8f0;
            border-left: none;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>

<body class="admin-panel">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Admin Login -->
    <div id="admin-login" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-5">
                    <div class="login-container p-5">
                        <h2 class="text-center fw-bold mb-4">Admin Login</h2>
                        <form id="admin-login-form">
                            <div class="mb-3">
                                <label class="form-label">Email Address</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                    <input type="email" class="form-control" id="login-email" placeholder="admin@hotelinfinity.com" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                    <input type="password" class="form-control" id="login-password" placeholder="Enter your password" required>
                                    <span class="input-group-text password-toggle" id="password-toggle">
                                        <i class="fas fa-eye"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="remember">
                                <label class="form-check-label" for="remember">Remember me</label>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 mb-3">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                            </button>
                            <div id="login-error" class="alert alert-danger mt-3" style="display: none;"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="container-fluid" style="display: none;">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar p-0">
                <div class="p-4">
                    <h5 class="text-white fw-bold mb-4">Hotel Infinity Admin</h5>
                    <ul class="list-unstyled">
                        <li><a href="#dashboard" class="active"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</a>
                        </li>
                        <li><a href="#manage-rooms"><i class="fas fa-bed me-2"></i> Manage Rooms</a></li>
                        <li><a href="#manage-halls"><i class="fas fa-building me-2"></i> Manage Party Halls</a></li>
                        <li><a href="#manage-bookings"><i class="fas fa-calendar-check me-2"></i> Bookings</a></li>
                        <li><a href="#manage-payments"><i class="fas fa-credit-card me-2"></i> Payments</a></li>
                        <li><a href="#manage-reviews"><i class="fas fa-star me-2"></i> Reviews</a></li>
                        <li><a href="#settings"><i class="fas fa-cog me-2"></i> Settings</a></li>
                        <li><a href="#" id="logout"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 ml-sm-auto px-4 py-4">
                <!-- Dashboard Section -->
                <div id="dashboard">
                    <h2 class="fw-bold mb-4">Dashboard</h2>
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Total Rooms</h5>
                                    <h2 class="fw-bold" id="total-rooms">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Total Halls</h5>
                                    <h2 class="fw-bold" id="total-halls">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Total Bookings</h5>
                                    <h2 class="fw-bold" id="total-bookings">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card bg-warning text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Total Revenue</h5>
                                    <h2 class="fw-bold" id="total-revenue">₹0</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <div class="chart-container">
                                <h5 class="fw-bold mb-3">Booking Statistics</h5>
                                <canvas id="bookingChart" height="250"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="chart-container">
                                <h5 class="fw-bold mb-3">Revenue Sources</h5>
                                <canvas id="revenueChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="chart-container">
                                <h5 class="fw-bold mb-3">Customer Ratings</h5>
                                <canvas id="ratingsChart" height="250"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="chart-container">
                                <h5 class="fw-bold mb-3">Customer Acquisition</h5>
                                <canvas id="acquisitionChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other sections (Manage Rooms, Halls, Bookings, etc.) would go here -->
                <!-- For brevity, I've kept only the dashboard section visible -->
                
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let amenities = [];
        let rooms = [];
        let partyHalls = [];
        let bookings = [];
        let payments = [];
        let reviews = [];
        let razorpaySettings = { key: '', secret: '' };
        let contacts = [];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            // Check if user was previously logged in
            const rememberedEmail = localStorage.getItem('rememberedEmail');
            if (rememberedEmail) {
                document.getElementById('login-email').value = rememberedEmail;
                document.getElementById('remember').checked = true;
            }

            // Password visibility toggle
            document.getElementById('password-toggle').addEventListener('click', function() {
                const passwordInput = document.getElementById('login-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });

            // Form submission
            document.getElementById('admin-login-form').addEventListener('submit', function (e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                const remember = document.getElementById('remember').checked;

                // Simple validation
                if (!email || !password) {
                    showError('Please fill in all fields');
                    return;
                }

                // Email validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showError('Please enter a valid email address');
                    return;
                }

                // For demonstration purposes - in a real application, this would be a server call
                if (email === 'admin@hotelinfinity.com' && password === 'admin123') {
                    // Success - save to localStorage if remember me is checked
                    if (remember) {
                        localStorage.setItem('rememberedEmail', email);
                    } else {
                        localStorage.removeItem('rememberedEmail');
                    }
                    
                    // Simulate successful login
                    simulateLoginSuccess();
                } else {
                    showError('Invalid email or password');
                }
            });

            // Logout button
            document.getElementById('logout').addEventListener('click', function (e) {
                e.preventDefault();
                localStorage.removeItem('adminToken');
                window.location.reload();
            });

            function showError(message) {
                const errorDiv = document.getElementById('login-error');
                document.getElementById('error-message').textContent = message;
                errorDiv.style.display = 'block';
                
                // Hide error after 5 seconds
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }

            function simulateLoginSuccess() {
                const submitButton = document.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                
                // Change button to loading state
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Logging in...';
                submitButton.disabled = true;
                
                // Simulate API call delay
                setTimeout(() => {
                    // Show success message
                    const errorDiv = document.getElementById('login-error');
                    errorDiv.classList.remove('alert-danger');
                    errorDiv.classList.add('alert-success');
                    document.getElementById('error-message').innerHTML = '<i class="fas fa-check-circle me-2"></i>Login successful! Redirecting...';
                    errorDiv.style.display = 'block';
                    
                    // Show admin panel and hide login form
                    document.getElementById('admin-login').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    
                    // Initialize charts and load data
                    initCharts();
                    loadSampleData();
                    
                }, 1500);
            }
            
            // Initialize charts
            function initCharts() {
                // Booking Statistics Chart
                const bookingCtx = document.getElementById('bookingChart').getContext('2d');
                const bookingChart = new Chart(bookingCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Room Bookings',
                            data: [12, 19, 15, 17, 22, 18, 25, 28, 22, 25, 20, 23],
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Hall Bookings',
                            data: [5, 8, 6, 9, 10, 7, 12, 14, 11, 13, 10, 12],
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // Revenue Sources Chart
                const revenueCtx = document.getElementById('revenueChart').getContext('2d');
                const revenueChart = new Chart(revenueCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['AC Rooms', 'Non-AC Rooms', 'Party Halls', 'Additional Services'],
                        datasets: [{
                            data: [45, 25, 20, 10],
                            backgroundColor: [
                                'rgba(54, 162, 235, 0.8)',
                                'rgba(75, 192, 192, 0.8)',
                                'rgba(255, 99, 132, 0.8)',
                                'rgza(255, 205, 86, 0.8)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true
                    }
                });

                // Customer Ratings Chart
                const ratingsCtx = document.getElementById('ratingsChart').getContext('2d');
                const ratingsChart = new Chart(ratingsCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['5 Stars', '4 Stars', '3 Stars', '2 Stars', '1 Star'],
                        datasets: [{
                            data: [45, 25, 15, 10, 5],
                            backgroundColor: [
                                'rgba(54, 162, 235, 0.8)',
                                'rgba(75, 192, 192, 0.8)',
                                'rgba(255, 205, 86, 0.8)',
                                'rgba(255, 159, 64, 0.8)',
                                'rgba(255, 99, 132, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true
                    }
                });

                // Customer Acquisition Chart
                const acquisitionCtx = document.getElementById('acquisitionChart').getContext('2d');
                const acquisitionChart = new Chart(acquisitionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'New Customers',
                            data: [30, 45, 35, 50, 55, 40, 65, 70, 60, 75, 65, 80],
                            fill: false,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // Load sample data for demonstration
            function loadSampleData() {
                // Sample data
                document.getElementById('total-rooms').textContent = '24';
                document.getElementById('total-halls').textContent = '8';
                document.getElementById('total-bookings').textContent = '156';
                document.getElementById('total-revenue').textContent = '₹2,45,800';
                
                // Sample amenities
                amenities = [
                    'Free WiFi', 'Swimming Pool', 'Fitness Center', 'Spa', 'Restaurant',
                    'Room Service', '24-Hour Front Desk', 'Business Center', 'Laundry Service',
                    'Airport Shuttle', 'Parking', 'Conference Rooms', 'Towel', 'Soap', 'Shampoo',
                    'Electric kettle', 'Tea', 'Coffee', 'Milk powder', 'Sugar pouch', 'Geyser',
                    'AC', 'TV', 'Wardrobe', 'CCTV', 'Fire extinguisher', 'WiFi', 'Room service',
                    'Printer & photocopy (chargeable)', 'Indoor games (carrom & chess etc) (chargeable)'
                ];
            }
        });
    </script>
</body>
</html>
